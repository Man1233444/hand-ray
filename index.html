<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mobile AR Tracker with Printable Marker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html {
    margin: 0; padding: 0; overflow: hidden; font-family: sans-serif;
    background: black;
  }

  #startScreen {
    position: absolute;
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: #fff;
    z-index: 10;
    text-align: center;
  }

  #startBtn {
    padding: 1em 2em;
    font-size: 1.5em;
    cursor: pointer;
    margin-top: 20px;
  }

  #marker {
    width: 300px;
    height: 300px;
    border: 2px solid black;
    margin-top: 20px;
  }

  #ar-container {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
  }
</style>
</head>
<body>

<div id="startScreen">
  <h1>Print This Marker</h1>
  <p>Take a screenshot to print it</p>
  <img id="marker" src="https://raw.githubusercontent.com/hiukim/mind-ar-js/master/examples/1-image-tracking/assets/target.png" alt="Marker">
  <button id="startBtn">Start AR</button>
</div>

<div id="ar-container"></div>

<script type="module">
import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
import { MindARThree } from 'https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js';

const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');

startBtn.onclick = async () => {
  startScreen.style.display = 'none';

  // Request fullscreen
  if (document.documentElement.requestFullscreen) {
    await document.documentElement.requestFullscreen();
  }

  const mindAR = new MindARThree({
    container: document.querySelector("#ar-container"),
    imageTargetSrc: 'https://raw.githubusercontent.com/hiukim/mind-ar-js/master/examples/1-image-tracking/assets/target.mind',
  });

  const { renderer, scene, camera } = mindAR;

  // Add a cube to track marker
  const geometry = new THREE.BoxGeometry(1, 1, 1);
  const material = new THREE.MeshNormalMaterial();
  const cube = new THREE.Mesh(geometry, material);

  const anchor = mindAR.addAnchor(0); // first target
  anchor.group.add(cube);

  anchor.onTargetFound = () => { cube.visible = true; };
  anchor.onTargetLost = () => { cube.visible = false; };

  await mindAR.start();

  renderer.setAnimationLoop(() => {
    renderer.render(scene, camera);
  });
};
</script>

</body>
</html>

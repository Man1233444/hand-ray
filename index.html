<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MindAR.js Marker AR</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html {
    margin: 0; padding: 0; overflow: hidden; font-family: sans-serif;
    background: black;
  }
  #startScreen {
    position: absolute;
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    background: #fff;
    z-index: 10;
    text-align: center;
  }
  #startBtn {
    padding: 1em 2em;
    font-size: 1.5em;
    cursor: pointer;
  }
  svg {
    margin-top: 20px;
  }
  #ar-container {
    width: 100%; height: 100%;
    position: absolute; top: 0; left: 0;
  }
</style>
</head>
<body>

<div id="startScreen">
  <h1>Print This Marker</h1>
  <svg id="barcode"></svg>
  <p>Take a screenshot or print this image</p>
  <button id="startBtn">Start AR</button>
</div>

<div id="ar-container"></div>

<!-- Three.js + MindAR -->
<script type="module">
import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';
import { MindARThree } from 'https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js';

document.getElementById('startBtn').onclick = async () => {
  document.getElementById('startScreen').style.display = 'none';

  // Request fullscreen
  if (document.documentElement.requestFullscreen) {
    await document.documentElement.requestFullscreen();
  }

  const mindAR = new MindARThree({
    container: document.querySelector("#ar-container"),
    imageTargetSrc: 'targets.mind', // your target file
  });

  const { renderer, scene, camera } = mindAR;

  // Add a cube that will track the marker
  const geometry = new THREE.BoxGeometry(1,1,1);
  const material = new THREE.MeshNormalMaterial();
  const cube = new THREE.Mesh(geometry, material);

  const anchor = mindAR.addAnchor(0); // index 0 for first target
  anchor.group.add(cube); // attach cube to marker

  anchor.onTargetFound = () => {
    cube.visible = true;
  };
  anchor.onTargetLost = () => {
    cube.visible = false;
  };

  await mindAR.start();
  renderer.setAnimationLoop(() => {
    renderer.render(scene, camera);
  });
};
</script>

<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

<script>
// Generate a printable marker (barcode style) but you can use any image for MindAR conversion
JsBarcode("#barcode", "AR123456", {
  format: "CODE128",
  width: 4,
  height: 150,
});
</script>

</body>
</html>
